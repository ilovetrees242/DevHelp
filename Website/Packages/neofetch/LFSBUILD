#!/bin/sh
LFSPKGNAME="neofetch"
LFSPKGVERSION="7.1.0"
LFSPKG="neofetch-7.1.0"
DEPENDS="bash"
case $1 in
    chkdeps)
        $(echo "$DEPENDS" | awk '{print $1}') --version 2&> /dev/null
        if [ $? -eq 127 ]; then
            echo -e "${RED}Dependency $(echo "$DEPENDS" | awk '{print $1}') not found!${NC}"
            exit 1
        fi
    ;;
    build)
        tar xvf $LFSPKG.tar.gz
        if [ $? -ne 0 ]; then
            echo -e "${RED}Error while extracting the build tarball. Manual intervention is required."
        pushd $LFSPKG
            make PREFIX=/usr install
            if [ $? -eq 0 ]; then
                echo -e "${GREEN}Successfuly installed $LFSPKGNAME.${NC}"
            fi
            else
                echo -e "${RED}Could not installed $LFSPKGNAME! Manual intervention is required.${NC}"
            fi
        popd
        rm -rf $LFSPKG.tar.gz $LFSPKG
    ;;
    uninstall)
        rm -f /usr/bin/neofetch
        echo -e "${GREEN}Successfully removed $LFSPKGNAME.${NC}"
        rm -rf $LFSPKG.tar.gz $LFSPKG
    ;;
esac
